---
id: com-atproto-repo-apply-writes
title: "com.atproto.repo.applyWrites"
description: "*This endpoint is part of the atproto PDS repository management APIs. Requests usually require authentication (unlike the `com.atproto.sync.*` endpoints), and are made directly to the user's own PDS instance.*"
sidebar_label: "com.atproto.repo.applyWrites"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/at-protocol-xrpc-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"com.atproto.repo.applyWrites"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/xrpc/com.atproto.repo.applyWrites"}
  context={"endpoint"}
>
  
</MethodEndpoint>



*This endpoint is part of the atproto PDS repository management APIs. Requests usually require authentication (unlike the `com.atproto.sync.*` endpoints), and are made directly to the user's own PDS instance.*

*To learn more about calling atproto API endpoints like this one, see the [API Hosts and Auth](/docs/advanced-guides/api-directory) guide.*

Apply a batch transaction of repository creates, updates, and deletes. Requires auth, implemented by PDS.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["repo","writes"],"properties":{"repo":{"type":"string","description":"The handle or DID of the repo (aka, current account).","format":"at-identifier"},"validate":{"type":"boolean","description":"Can be set to 'false' to skip Lexicon schema validation of record data across all operations, 'true' to require it, or leave unset to validate only for known Lexicons."},"writes":{"type":"array","items":{"oneOf":[{"type":"object","description":"Operation which creates a new record.","required":["collection","value"],"properties":{"collection":{"type":"string","format":"nsid"},"rkey":{"type":"string","description":"NOTE: maxLength is redundant with record-key format. Keeping it temporarily to ensure backwards compatibility.","format":"record-key","maxLength":512},"value":{}},"title":"com.atproto.repo.applyWrites.create"},{"type":"object","description":"Operation which updates an existing record.","required":["collection","rkey","value"],"properties":{"collection":{"type":"string","format":"nsid"},"rkey":{"type":"string","format":"record-key"},"value":{}},"title":"com.atproto.repo.applyWrites.update"},{"type":"object","description":"Operation which deletes an existing record.","required":["collection","rkey"],"properties":{"collection":{"type":"string","format":"nsid"},"rkey":{"type":"string","format":"record-key"}},"title":"com.atproto.repo.applyWrites.delete"}]}},"swapCommit":{"type":"string","description":"If provided, the entire operation will fail if the current repo commit CID does not match this value. Used to prevent conflicting repo mutations.","format":"cid"}}}}}}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","required":[],"properties":{"commit":{"type":"object","required":["cid","rev"],"properties":{"cid":{"type":"string","format":"cid"},"rev":{"type":"string","format":"tid"}},"title":"com.atproto.repo.defs.commitMeta"},"results":{"type":"array","items":{"oneOf":[{"type":"object","required":["uri","cid"],"properties":{"uri":{"type":"string","format":"at-uri"},"cid":{"type":"string","format":"cid"},"validationStatus":{"type":"string","enum":["valid","unknown"]}},"title":"com.atproto.repo.applyWrites.createResult"},{"type":"object","required":["uri","cid"],"properties":{"uri":{"type":"string","format":"at-uri"},"cid":{"type":"string","format":"cid"},"validationStatus":{"type":"string","enum":["valid","unknown"]}},"title":"com.atproto.repo.applyWrites.updateResult"},{"type":"object","required":[],"properties":{},"title":"com.atproto.repo.applyWrites.deleteResult"}]}}}}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"type":"object","required":["error","message"],"properties":{"error":{"type":"string","enum":["InvalidRequest","ExpiredToken","InvalidToken","InvalidSwap"]},"message":{"type":"string"}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","required":["error","message"],"properties":{"error":{"const":"AuthMissing"},"message":{"type":"string"}}}}}}}}
>
  
</StatusCodes>


      